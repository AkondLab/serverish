# Main comcepts of the serverish helpers


## Paramterized
The serverish helpers are parameterized in the sense of deriving from `param.Parameterized` class.


## Tree structure
The serverish components are organizable in a tree structure. 
The `Manageable` class is responsible for the tree structure maintenance.

## Messenger
nats-based messenger

### Metadata
The metadata is sent with all the messages handled by the `Messenger`.
The python dict (json serialized) structure of the message is:
```python
{
    "data": {
        "user_keys":  "user_values",
        # ...
    },
    "meta": {
        "message_id": "message_id",  # autogenerated
        "sender": "sender_name",
        "receiver": "receiver_name",  # only for direct messages
        "timestamp": (2021, 1, 1, 0, 0, 0, 0, 0, 0),  # as time touple e.g. (2021, 1, 1, 0, 0, 0, 0, 0, 0)
        "trace_level": logging.DEBUG,  # Message trace will be logged if loglevel <= trace_level
        "message_type": "message_type",
        "tags": ["tag1", "tag2", ...],
    }
}
```

### Validation
The message is validated against the schema. 
Schema files for message data are located in `serverish/schemas/` directory.

The name corresponds to the `message_type` field of the message metadata.

Metadata schema is hardcoded in the `MetaValidator` class.

